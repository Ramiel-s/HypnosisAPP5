<head><script type="module">var e={502(e,t){t.A=(e,t)=>{const o=e.__vccOpts||e;for(const[e,s]of t)o[e]=s;return o}}},t={};const o=Vue,s=['公告区','新手引导区','综合讨论区','成果展示区','求助区'];function n(){return Date.now()}function r(){return`mchan.v1:${function(){try{const e=window?.SillyTavern?.getCurrentChatId?.();if(null!=e&&String(e).length>0)return String(e)}catch{}return'global'}()}`}function a(e){return'string'==typeof e&&s.includes(e)}function l(){const e=localStorage.getItem(r());if(!e)return{version:1,boards:{公告区:{posts:[]},新手引导区:{posts:[]},综合讨论区:{posts:[]},成果展示区:{posts:[]},求助区:{posts:[]}},meta:{}};const t=function(e){try{return JSON.parse(e)}catch{return}}(e);if(!t||'object'!=typeof t)return{version:1,boards:{公告区:{posts:[]},新手引导区:{posts:[]},综合讨论区:{posts:[]},成果展示区:{posts:[]},求助区:{posts:[]}},meta:{}};if(1!==t.version)return{version:1,boards:{公告区:{posts:[]},新手引导区:{posts:[]},综合讨论区:{posts:[]},成果展示区:{posts:[]},求助区:{posts:[]}},meta:{}};const o={version:1,boards:{公告区:{posts:[]},新手引导区:{posts:[]},综合讨论区:{posts:[]},成果展示区:{posts:[]},求助区:{posts:[]}},meta:{}},l=t.boards;if(l&&'object'==typeof l)for(const e of s){const t=l[e];t&&'object'==typeof t&&Array.isArray(t.posts)&&(o.boards[e].posts=t.posts.filter(e=>e&&'object'==typeof e).map(t=>{const o=a(t.board)?t.board:e,s=Number.isFinite(t.postNo)?Number(t.postNo):1,r='string'==typeof t.title?t.title:`帖子${s}`,l='string'==typeof t.body?t.body:'',c=Number.isFinite(t.createdAtMs)?Number(t.createdAtMs):n(),i=Number.isFinite(t.updatedAtMs)?Number(t.updatedAtMs):c,d=Array.isArray(t.floors)?t.floors.filter(e=>e&&'object'==typeof e).map(e=>({floorNo:Number.isFinite(e.floorNo)?Number(e.floorNo):1,content:'string'==typeof e.content?e.content:'',createdAtMs:Number.isFinite(e.createdAtMs)?Number(e.createdAtMs):n(),source:'ai'===e.source||'user'===e.source||'local'===e.source?e.source:'local',originKey:'string'==typeof e.originKey?e.originKey:void 0,originFloorTagNo:Number.isFinite(e.originFloorTagNo)?Number(e.originFloorTagNo):void 0})):[];return d.sort((e,t)=>e.floorNo-t.floorNo),{board:o,postNo:s,title:r,body:l,createdAtMs:c,updatedAtMs:i,floors:d}}),o.boards[e].posts.sort((e,t)=>e.postNo-t.postNo))}const c=t.meta;if(c&&'object'==typeof c){const e=c.lastParsedAssistantMessageId;Number.isFinite(e)&&(o.meta.lastParsedAssistantMessageId=Number(e))}return o}function c(e,t){return e.boards[t].posts}function i(e,t){return c(e,t).reduce((e,t)=>Math.max(e,t.postNo),0)+1}function d(e){return e.floors.reduce((e,t)=>Math.max(e,t.floorNo),0)+1}function b(e,t){const o=d(e),s=t.floorNo,r='number'==typeof s&&s===o?s:o,a={...t,floorNo:r};return e.floors.push(a),e.floors.sort((e,t)=>e.floorNo-t.floorNo),e.updatedAtMs=n(),a}function u(e){return e.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')}function p(e){return e.replace(/\r\n/g,'\n').trim()}function f(e){const t=p(e);if(!t)return[];const o=s.map(u).join('|'),n=new RegExp(`<(?<tag>(?:${o})帖子\\d+)>(?<inner>[\\s\\S]*?)<\\/\\k<tag>>`,'gu'),r=[];for(const e of t.matchAll(n)){const t=e.groups?.tag??'',s=e.groups?.inner??'',n=t.match(new RegExp(`^(?<board>${o})帖子(?<no>\\d+)$`,'u')),l=n?.groups?.board,c=n?.groups?.no;if(!l||!c||!a(l))continue;const i=Number.parseInt(c,10);if(!Number.isFinite(i)||i<=0)continue;const d=s.match(/<标题>([\s\S]*?)<\/标题>/u)?.[1],b=s.match(/<正文>([\s\S]*?)<\/正文>/u)?.[1],u=/<(?<ftag>楼层\d+)>(?<finner>[\s\S]*?)<\/\k<ftag>>/gu,f=[];for(const e of s.matchAll(u)){const t=e.groups?.ftag??'',o=e.groups?.finner??'',s=t.match(/^楼层(\d+)$/u)?.[1],n=s?Number.parseInt(s,10):void 0,r=p(o);r&&f.push({floorTagNo:n,content:r})}r.push({board:l,postNo:i,title:d?p(d):void 0,body:b?p(b):void 0,floors:f})}return r}function m(e,t,o,s){let r=0,a=0;return t.forEach((t,l)=>{const c=e.boards[t.board].posts.some(e=>e.postNo===t.postNo),i=function(e,t,o,s){const r=e.boards[t].posts;let a=r.find(e=>e.postNo===o);if(a)s&&('string'==typeof s.title&&s.title.trim().length>0&&(a.title=s.title.trim()),'string'==typeof s.body&&s.body.trim().length>0&&(a.body=s.body.trim()),a.updatedAtMs=n());else{const e=n();a={board:t,postNo:o,title:s?.title??`${t} 帖子${o}`,body:s?.body??'',createdAtMs:e,updatedAtMs:e,floors:[]},r.push(a),r.sort((e,t)=>e.postNo-t.postNo)}return a}(e,t.board,t.postNo,{title:t.title,body:t.body});c||(r+=1),t.floors.forEach((e,r)=>{const c=void 0!==s?`msg:${s}:post:${t.board}:${t.postNo}:floor:${l}:${r}`:void 0;c&&i.floors.some(e=>e.originKey===c)||(b(i,{content:e.content,createdAtMs:n(),source:o,originKey:c,originFloorTagNo:e.floorTagNo}),a+=1)})}),void 0!==s&&(e.meta.lastParsedAssistantMessageId=Math.max(e.meta.lastParsedAssistantMessageId??-1,s)),{createdPosts:r,appendedFloors:a}}function N(e){return e.replace(/[<>]/g,e=>'<'===e?'＜':'＞')}function v(e){const t=e.lastFloorNo+1,o=t+6-1,s=`${e.post.board}帖子${e.post.postNo}`,{block:n,truncated:r}=function(e,t){const o=Math.max(1,t?.maxFloors??30),s=e.floors,n=s.length>o,r=n?s.slice(Math.max(0,s.length-o)):s,a=`${e.board}帖子${e.postNo}`;return{block:[`<${a}>`,`<标题>${N(e.title)}</标题>`,`<正文>${N(e.body)}</正文>`,...r.map(e=>`<楼层${e.floorNo}>${N(e.content)}</楼层${e.floorNo}>`),`</${a}>`].join('\n'),truncated:n}}(e.post,{maxFloors:30}),a=(e.aiStyleHint??'').trim();return[`{{user}}刚发布了匿名版「${e.post.board}」的一个串，你需要模仿其他匿名用户继续回复。`,`你要生成 6 个新楼层（楼层号从 ${t} 到 ${o}）。`,a?`额外要求：${a}`:'','引用（帖子标题/正文/已有楼层，作为上文与格式示例）：','<匿名版>',r?'（上文已截断：仅包含最近30楼）':'',n,'</匿名版>','输出要求：','- 必须严格只输出以下 HTML 标签并用<匿名版></匿名版>包裹结构：','- 不要输出任何额外文字/解释','- 不要输出 Markdown 代码块/反引号','- 楼层内容中避免出现 < 或 >（如必须使用请改用全角＜＞）','- 回复要像真实匿名版：可以短句、口语、偶尔用 >>No.楼层号 引用','以下是格式示例：','<匿名版>',`<${s}>`,...Array.from({length:6},(_,e)=>{const o=t+e;return`<楼层${o}>（以匿名用户口吻写内容）</楼层${o}>`}),`</${s}>`,'</匿名版>'].filter(Boolean).join('\n')}function y(e){return`"${e.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\r?\n/g,'\\n')}"`}async function g(e){try{return void await triggerSlash(`/setinput ${y(e)} | /send | /trigger`)}catch{}try{await triggerSlash(`/setinput ${y(e)}`)}catch{}await createChatMessages([{role:'user',message:e}]),await triggerSlash('/trigger')}const E={公告区:[{board:'公告区',postNo:1,title:'置顶：匿名版守则（简版）',body:'这里是自建匿名版。请勿泄露现实身份信息；匿名版内一切内容均为角色扮演/故事设定。',floors:['欢迎使用。本匿名版为催眠APP使用者自行搭建, 跟官方无关, 也不负责售后。']},{board:'公告区',postNo:2,title:'【警示】最近在涩谷有人当众使用催眠APP被发现, 人被警察带走了, 大家注意低调',body:'如题，为了避免引起注意，请大家避免在公众场合被目击使用明显的催眠。',floors:['真是蠢货，要是害得警方注意到了那就麻烦了。']}],新手引导区:[{board:'新手引导区',postNo:1,title:'[急] 手机太老了, 后台开了几个app后再用催眠APP, 手机现在烫得吓人, 会影响功能吗？',body:'刚下载APP，想试试效果。结果刚开始催眠，手机背面烫得能煎鸡蛋，APP还特别卡。这种情况下还能正常催眠吗？能不能贴模板脸上增强效果顺便散热。在线等，挺急的。',floors:['楼主你什么机型？建议外挂个散热背夹，这APP优化极差，不仅吃内存还烧CPU。','贴脸上物理降温草，你这是要把目标烫醒吗？','别硬撑，万一电池炸了，你就直接把人脸给炸了','建议杀后台软件，还卡就老老实实换手机吧。']},{board:'新手引导区',postNo:2,title:'[疑问] 目标重度近视, 5米之外人畜不分那种, 会影响催眠效果吗？',body:'我在图书馆对一个眼镜娘用了基础催眠，平时只要对视3秒就晕了。但她刚好在擦眼镜，看了半天好像没什么反应，虽然也没认出我来。难道近视还能防催眠？',floors:['笑死，近视反催眠。','如果近视到看不清屏幕的话, 大概会影响吧','这种情况下还是等她带上眼镜吧','也有可能只是你催眠指令太模糊了, 催眠了也没发现.','这就是为什么我在平板上也装了这个app，大屏幕专门对付近视娘。']},{board:'新手引导区',postNo:3,title:'[系统] 安装APP时提示要开启“麦克风”和“定位”权限，这安全吗？',body:'为什么催眠APP也要这么多权限啊！这APP要这么多权限，会不会偷听我说话或者把我的位置发给网警？有没有懂哥分析一下代码？',floors:['楼主你用催眠APP了，还怕网警？','麦克风是为了采集你的声纹生成“命令音频”，定位是为了扫描附近的“可攻略素体”，别想多了。','你要是怕，就搞个备用机，不插卡只连公共WiFi。','最大的安全隐患是你操作失误被目标报警，而不是APP本身。','放心吧，开发这APP的组织都有这种黑科技了，想要你那点隐私还不简单?']},{board:'新手引导区',postNo:4,title:'[新人] 初始任务送的点数怎么花性价比最高？',body:'刚注册初始任务送了一点点数，功能里琳琅满目不知道买啥。是买点数上限还是解锁新功能”？我想走纯爱路线（指让对方以为我是她男朋友）。',floors:['别买时间停止！别买时间停止！新人MC能量不够, 只能停几分钟，脱个裤子都来不及，除非你是快枪手.','纯爱流必须点“常识修改”，这是核心技能。先把“陌生人判定”改成“熟人判定”。','解锁敏感度修改或者发情吧, 先让目标高潮获得MC点, 循环起来','楼上说得对','新人听我一句劝，先买“记忆消除”，万一玩脱了还能跑路。']},{board:'新手引导区',postNo:5,title:'[社死] 以为断开投屏了，结果在百寸大屏上启动了APP，老板问那个螺旋是什么',body:'如题。刚才季度汇报，讲完PPT后投屏没关。由于太无聊，手贱想解锁个新功能结果点错了。\n\n结果那个巨大的、粉紫色的、高对比度的螺旋就在100寸幕布上转了起来。\n音响还非常尽职尽责地最大音量播报了：『催眠APP, 启动』。\n\n全场死寂了大概5秒。\n现在老板、HR、还有隔壁组的那个大胸女经理都在看着我，眼神很奇怪。\n我现在躲在楼道抽烟，手在抖。\n\n有没有一种可能，投影仪流明够高，完成了群体催眠？\n我是不是可以直接命令老板给我涨薪了？在线等，挺急的。',floors:['没救了，重开吧。','>>1 楼主醒醒。投影仪只负责投影影像，就算有效果估计也会失真。除非你老板贴在幕布上看，否则他们现在只是觉得你是个变态。','笑死，这就是传说中的全屏AOE吗？但是没过判定啊wwww','快！趁现在还没断开连接，马上播放『常识置换』的音频！把设定改成『这是公司最新的视觉系企业文化宣传片』！只要你信念够强，说不定能蒙混过关！','『催眠APP, 启动』... 笑死, 喜欢自定义启动音效是吧。建议楼主直接说是中了病毒，或者说这是测试部开发的什么奇怪Demo。','如果那个女经理脸红了，说明她可能潜意识抗性低，楼主不要放弃，单独找她试试。','悲报：楼主十分钟没回话了，估计已经被保安叉出去了。','RIP。下辈子记得先检查投屏开关，或者别在公司用这种APP啊白痴。','有没有后续？如果老板也被催眠了，是不是可以直接把公司变成这种APP的线下据点？想想都有点带感。','>>9 醒醒，你当这是H漫吗？']}],综合讨论区:[{board:'综合讨论区',postNo:1,title:'【悲报】最新版本的耗电量也太异常了，手机发烫严重',body:'只是开启了十分钟的「常识重构」模式，我的Xperia简直烫得能煎鸡蛋。\n\n明明说明书上写着使用的是“不可听声波”，但这发热量怎么看都是在满负荷运行吧？\n刚才差点就在目标面前露馅了，因为她碰到我的手时候问我为什么拿着个暖宝宝。\n\n如果不解决散热问题，夏天根本没法用啊。',floors:['>>1 这里的常识是：高性能=高发热。想控制那个精密的大脑，这点代价是必须的吧。','我都贴着退烧用的冷却贴在手机背面用的，建议你也试试。','比起这个，把常识改成“手机发烫是因为里面寄宿着热情的精灵”不就好了？反正平然化之后她也不会觉得奇怪。','>>3 天才。但这甚至比原来的借口更可疑吧w','不要用索尼，换个散热好的游戏手机吧。虽然拿着那种RGB光污染严重的手机去催眠有点破坏气氛就是了。']},{board:'综合讨论区',postNo:2,title:'关于范围催眠在早高峰电车上的测试报告',body:'坐标山手线。\n今早试着开启了范围模式，设定内容是：「电车摇晃时大声喊出“喵”是礼貌行为」。\n\n效果非常惊人，但也非常精神污染。\n\n一个大叔失去平衡时喊了一声野太的“喵！”，周围的OL和学生完全没有惊讶，甚至有个jk点头示意，觉得大叔很有教养。\n最可怕的是，哪怕没有完全站稳的人，为了不被当成没礼貌的家伙，也会特意晃动一下然后叫一声。\n\n这就是地狱吗？',floors:['草。','>>1 你是恶魔吗？想象了一下那个画面，咖啡喷了一屏幕。','平然化机制太强了。如果不设定“遗忘”，下车后他们会记得自己像猫一样叫了一路吗？','>>3 只要没设定“离开范围失效”，这种常识改变会持续一段时间吧。估计到了公司也会对着上司喵喵叫。','这已经属于社会实验了吧。下次试试把常识改成“必须像相扑力士一样张开腿站立”看看。','我也想试试，但我这边的乡下电车根本不挤，完全没有触发条件（哭）。']},{board:'综合讨论区',postNo:3,title:'如果不小心照到了镜子会怎么样？',body:'刚才在洗手间测试，屏幕亮度开到了最大。\n不小心通过镜子的反射和屏幕对视了大概3秒。\n\nAPP说明上好像没写有“使用者保护机制”，但我现在感觉有点奇怪。\n总觉得“必须要给这层楼的每个人买布丁”是一种宇宙真理。\n\n我现在手里提着20个布丁站在便利店门口。\n这是BUG吗？还是我单纯饿了？',floors:['>>1 恭喜，你中招了。把自己给催眠了www。','快点对自己使用“解除”或者“重置”音频！在那个奇怪的常识根深蒂固之前！','来不及了，如果是高强度的常识改变，>>1 现在的潜意识已经在合理化这个行为了。“买布丁是人类生存的义务”。','把布丁寄给我，我帮你解除催眠。地址是东京都...','别听楼上的。只要你没把APP给扔了，稍微睡一觉，那是短期暗示，过几个小时就失效了。','这就是所谓的“自爆”吧，笨蛋w']},{board:'综合讨论区',postNo:4,title:'那个...我想把常识改成「全裸待机是正常的」，结果出大问题了',body:'对象是借住在我家的青梅竹马。\n我看她眼神涣散，以为成功了，结果这APP的判定是不是有点过于严谨？\n\n她现在确实觉得全裸是正常的，像呼吸一样自然。\n在客厅看电视、做饭都一丝不挂，完全没有羞耻心，甚至还问我为什么在家里还要穿衣服。\n\n问题是：她对我完全没有那方面的意思。\n\n哪怕她光着身子坐在我旁边，态度也和平时一样冷淡，依然在吐槽我打游戏太菜。\n甚至因为“裸体很正常”，我盯着看反而会被说“你这家伙盯着别人的皮肤看什么，恶心”。\n\n这和我想象的桃色展开完全不一样啊！怎么会这样！',floors:['>>1 可怜的家伙w','这是当然的吧。你只改变了“关于衣服的常识”，又没改变“对你的好感度”。','这就叫“色即是空”。因为全裸变得理所当然了，所以在她眼里你看到的裸体就和看到脸没什么区别。','反而更兴奋了怎么办。这种平然的日常感才是最棒的。','建议追加设定：「虽然裸体很正常，但皮肤接触是打招呼的方式」。一步一步来嘛，楼主太心急了。','>>1 这种由于常识改变带来的“无防备感”才是精髓啊，你还太甜了。']}],成果展示区:[{board:'成果展示区',postNo:1,title:'【免费】试着把深夜的便利店变成了“某种服务场所”',body:'既然是深夜班，稍微玩大一点也没关系吧？\n\n使用了范围催眠，针对那个总是戴着耳机爱理不理的打工妹。\n设定常识：「结账时，为了表示对客人的感谢，必须让客人确认内裤的颜色」。\n\n【视频附件：00:45】\n画面为便利店收银台监控视角（带噪点）。一名身穿制服的年轻女店员在扫描商品条形码的同时，左手极其自然地掀起后侧裙摆，暴露出白蓝条纹的棉质内裤。在做出“请确认金额”的手势时，她特意向柜台外侧转身并微微翘起臀部以展示胯下。柜台前的中年男性顾客面无表情地注视着这一部位长达五秒，随后平静地掏出钱包付款。女店员放下裙摆，继续进行装袋动作，表情从头到尾保持着无精打采的营业状态。',floors:['这就是传说中的“杀必死”吗？那个冷漠的表情配上这种动作简直极品。','>>1 这种平然的感觉太棒了。她完全没意识到自己在做什么变态的事情，只是把它当成工作流程的一部分w','我也想去这家店。请务必把常识追加为“如果是会员，可以触摸确认质地”。','后面的大叔也太淡定了吧，这就是那个什么“认知阻碍”的效果？','>>4 是常识改变啦。在大叔眼里这就和看着店员装袋一样自然。']},{board:'成果展示区',postNo:2,title:'【10MC】既然是名门高中的大小姐，那肯定也是名门的“肉便器”吧？（多图）',body:'捕捉到了野生的学生会长。\n虽然平时总是一副看垃圾的眼神看着我们，但只要稍微修改一下大脑里的字典...\n\n设定：「虽然是高贵的大小姐，但生理构造是公用的」。\n\n【图片集附件：共15张】\n[Image 01-03] 场景为学生会室。一名黑长直发女生坐在红木办公桌上，双手端着骨瓷茶杯优雅饮茶，下半身裙装褪至脚踝，双腿向两侧极大张开呈M字型展示私处，视角正对镜头。\n[Image 04-08] 体育器材室背景。画面模糊，显示一名身穿运动服的中年男性正从后方对该女生进行插入行为。女生脸部特写显示其表情高傲冷淡，眼神直视前方，带有某种履行义务般的庄严感。\n[Image 09] 走廊过道。学生会室的大门紧闭，门把手上挂着一块木制牌子，用流利的书法写着：『公用肉壶 使用中』。',floors:['神。MC点已付，请务必搞快点。','这种反差感真是让人受不了。明明姿势那么下流，气质却还是那么高贵。','>>1 真的假的，那个大小姐？楼主小心别被特定的啊w','这就是APP的可怕之处吗...连羞耻心都被重新定义为“荣耀”了。','不管看多少次，这种被常识束缚导致无法反抗的样子还是最能激发征服欲啊。']},{board:'成果展示区',postNo:3,title:'【免费/悲报】我不小心把“常识”的范围设定错了...',body:'本来想让女友觉得“在家不穿内衣很正常”。\n结果没注意开启了【区域广播模式】。\n\n现在好了，我妈、我姐，还有刚才来送快递的大妈，全部都是真空上阵。\n\n【视频附件：00:15】\n手持摄像机拍摄的家庭客厅场景。镜头扫过沙发，一名50岁左右的女性身穿宽松白色T恤，胸部位置有明显的激凸和下垂轮廓，动作间衣领敞开可见大片肌肤。画面快速切向开放式厨房，年轻女性背对镜头切菜，身上仅穿着一件粉色围裙，侧面视角确认围裙下没有任何衣物，系带直接勒进裸露的背部肉中。视频末尾，玄关门打开，一名穿着快递公司制服马甲的中年女性走进屋内，马甲拉链未拉，随着走动可以看到松弛的乳房在敞开的制服下大幅晃动。',floors:['>>1 住手！这是天堂啊！绝对不要解除！','这就是所谓的“意外之喜”吗？快递大妈就免了吧w','羡慕死我了。既然都是一家人，下一步把“乱伦”的常识也修正一下不就完美了吗？','>>1 请务必让我去你家做客，我不介意热一点。','笨蛋楼主，这种时候应该顺水推舟，把常识改为“互相检查身体是增进家庭和睦的方式”。']},{board:'成果展示区',postNo:4,title:'【5MC】让偶像团体握手变握屌会',body:'买了那个地下偶像团体的握手券。\n偷偷把常识修改成了：「握手会其实是“握屌会”，粉丝把那东西拿出来是应援的一种方式」。\n\n【视频附件：03:20】\n偶像握手会现场全景。长桌后站着五名身穿亮片演出服的年轻偶像。桌子对面的粉丝列队中，男性粉丝纷纷拉下裤链，将生殖器搁置在铺有桌布的长桌面上。C位偶像保持着标准的露齿笑容，并未看向粉丝脸部，而是直接伸出双手握住面前粉丝的阴茎，进行幅度约为5厘米的上下摇晃动作，嘴唇开合似乎在说着“谢谢支持”。背景处身穿『STAFF』字样T恤的工作人员正用扩音器对排队人群进行引导，并没有对暴露行为进行阻拦，反而指着挂在墙上的“严禁射精”告示牌进行提醒。',floors:['我要吐了，也是字面意义上的。','>>1 虽然很恶心，但Staff也在维护秩序这个点戳中笑点了。这就是平然化的恐怖吗。','买了。想看有没有粉丝真在现场发射的。','这种虽然没有H行为但充满了疯狂气息的视频才是最棒的。','下次试试把常识改成“必须用嘴叼着门票入场”吧。']},{board:'成果展示区',postNo:6,title:'【悬赏】想看到“排泄”常识逆转的场景',body:'我想把看到把常识改成：「上厕所是一件非常羞耻、必须在大庭广众之下被人围观才能做的事」，而「在大街上漏出来反而是卫生的」。\n\n但是自己的能量不够\n有没有能够实现这个场景的。\n悬赏 30 MC点。',floors:['楼主口味真重...但我喜欢。','>>1 是需要露天排泄吗, 但平然感太强好像有点没意思, 要不要加个羞耻心反转?','楼上天才','期待成果视频。还有，请务必加上“完事后要求表扬”的设定。']}],求助区:[{board:'求助区',postNo:1,title:'【急】目标陷入了逻辑死循环，正在疯狂发热',body:'对象是图书委员长，性格比较死板的那种。\n我给她植入了「绝对服从APP持有者」的命令，但忘记删除她原本「绝对遵守校规」的强烈潜意识。\n\n刚才我命令她「在图书馆大声叫春」，结果她整个人僵住了。\n眼神在涣散和清醒之间以极高的频率切换，嘴里一直重复着“叫...不...叫...不...”。\n\n最可怕的是她头顶真的在冒烟啊！摸了一下额头烫得吓人。\n这会不会把大脑烧坏？我现在无论说什么她都没反应了。',floors:['>>1 典型的逻辑冲突。这种认真型的妹子最麻烦了。','就像给电脑同时输入两个相反指令一样，CPU过热了w','快点用“强制关机”音频！就是那个长按音量键+电源键触发的紧急模式！www','如果烧坏了也挺好的，变成只会流口水的废人娃娃，玩法更多（笑）。','>>1 别听楼上的，那是不可逆损伤。赶紧带去保健室，然后用物理降温（指冰袋，不是你的那话儿）。']},{board:'求助区',postNo:2,title:'误操作结果被物理反杀了',body:'目标是拳击社的主将。\n我想着只要让她看一眼屏幕就赢了，于是假装去问路。\n\n结果这APP启动的时候闪光灯闪了一下（好像是我误触了）。\n她下意识一个右勾拳直接轰在我脸上。\n\n醒来的时候在医院，手机碎成了渣。\n医生说我鼻梁骨断了。\n这种情况APP开发商管赔吗？',floors:['>>1 赔个屁w 自己操作失误怪谁。','谁让你去惹格斗系的，那种人的反射神经比视觉处理速度还快。','手机碎了数据备份了吗？要是账号丢了那才是真悲剧。','惨。不过换个角度想，你现在有了“被她打伤”的借口，可以去勒索...啊不，去以此为借口接近她了。','楼上天才。这才是正统的本子开局啊！“如果不听话我就去起诉你伤害罪”。']},{board:'求助区',postNo:3,title:'这也太离谱了，目标的“精神抗性”也太高了吧？',body:'试图对那个很有名的辣妹系使用常识重构。\n设定是「不知羞耻的露出狂」。\n\n进度条明明显示100%完成了。\n结果她只是皱了皱眉，说了一句：“哈？这种程度的内衣外穿现在很流行吧？土包子。”\n\n然后就若无其事地继续玩手机了。\n我想让她脱光，她反而嘲笑我：“想看？给钱啊。你是穷鬼吗？”\n\n完全没有被催眠的那种呆滞感，反而把我的命令合理化成了她的原有性格。\n这是失败了吗？',floors:['不是失败，是“兼容性过高”导致的同化现象。','>>1 说明她本来潜意识里就挺荡的，你的催眠只是给了她一个放飞自我的借口。','这种情况反而更难搞，因为她觉得自己是清醒的。建议加大剂量，或者直接改用“人格排泄”模式。','辣妹系的防御力本来就是谜。有时候看似只是碧池，其实内心防线坚不可摧；有时候看似纯情，其实一戳就破。','试试给钱？说不定会有意外收获。反正之后可以用“遗忘”把钱拿回来。']},{board:'求助区',postNo:4,title:'救命，我不小心把自己手机的音频输出孔给堵住了',body:'为了防止误触，我一直用胶带贴着扬声器。\n结果刚才想用“声波催眠”模式对付那个一直在睡觉的同桌。\n\nAPP显示“发送中”，但因为声音出不去，好像导致手机内部元件过热，触发了某种短路。\n现在手机屏幕变成了诡异的漩涡状图案，而且关不掉！\n\n最糟糕的是，我盯着屏幕看了一会儿想修好它，现在感觉眼皮好沉...\n总觉得“把手机吃下去”似乎是个不错的修理方法...\n\n我是不是要完了？打字好困...',floors:['>>1 喂！别看屏幕！把手机扔远点！','这是一个楼主即将变成这楼里第一个牺牲者的现场吗？','笑死，这种低级错误。声波反射回震把自己给催眠了？','>>1 还在吗？如果你还在，请回复“汪”一声。','大概已经在吃手机了吧。南无。希望没有设定什么“变成性奴”之类的催眠吧。']},{board:'求助区',postNo:5,title:'关于把目标玩坏后的售后处理',body:'一时兴起，给隔壁的人妻设定了「每走一步就会高潮一次」的常识。\n我想着看她走路摇摇晃晃的样子一定很有趣。\n\n结果忘了设定“仅限五分钟”的时间限制。\n她去买菜的路上走了两千步...\n\n现在她瘫在路边口吐白沫，翻着白眼抽搐，救护车都来了。\n由于常识还在，她在担架上只要被震动一下就会发出一声巨大的娇喘，急救人员都看傻了。\n\n这种情况下我该怎么混进去解除催眠？如果你是医生，你会让一个路人靠近患者吗？',floors:['>>1 你是个罪人w 但干得漂亮。','这就是玩脱了的典型。那种强度的快感会把神经烧断的。','别去解除了，现在去肯定会被当成可疑分子抓起来。','等她到了医院，你也装病混进去吧。或者用远程声波试试？虽然医院嘈杂环境效果不好。','估计醒来后大脑会开启自我保护机制把这段记忆封锁吧...大概。或者变成真正的废人。']}]};const V={class:'bbs'},k={class:'bbs__header'},h={key:0,class:'bbs__status'},A={class:'bbs__actions'},w={class:'bbs__nav','aria-label':'boards'},P=['onClick'],S={class:'bbs__navText'},M={class:'bbs__navCount'},C={key:0,class:'bbs__tools'},B={class:'bbs__toolsBody'},D={class:'bbs__field'},T=['value'],x={class:'bbs__field'},F={class:'bbs__row'},I={class:'bbs__main','aria-label':'content'},j={key:0,class:'bbs__board'},O={class:'bbs__boardTop'},R={class:'bbs__boardTitle'},H={key:0,class:'bbs__empty'},U=['onClick'],G={class:'bbs__colNo'},J={class:'bbs__colSubj'},K={class:'bbs__subject'},L={key:0,class:'bbs__snippet'},W={class:'bbs__colR'},X={class:'bbs__colUpd'},Y={key:1,class:'bbs__thread'},q={class:'bbs__threadTop'},Q={class:'bbs__crumb'},Z={class:'bbs__crumbBoard'},ee={class:'bbs__mono'},te={key:0,class:'bbs__op'},oe={class:'bbs__opHead'},se={class:'bbs__subject'},ne={class:'bbs__meta'},re={key:0,class:'bbs__opBody'},ae={key:1,class:'bbs__replies'},le={key:0,class:'bbs__empty'},ce={class:'bbs__replyHead'},ie={class:'bbs__replyNo'},de={class:'bbs__replyMeta'},be=['onClick'],ue={class:'bbs__replyBody'},pe={key:2,class:'bbs__composer'},fe={key:0,class:'bbs__hint'},me={class:'bbs__mono'},Ne={class:'bbs__field'},_e={class:'bbs__field'},ve={class:'bbs__row'},ye={key:2,class:'bbs__newThread'},ge={class:'bbs__threadTop'},Ee={class:'bbs__crumb'},Ve={class:'bbs__crumbBoard'},ke={class:'bbs__composer'},he={class:'bbs__field'},Ae={class:'bbs__field'},we={class:'bbs__row'},Pe=(0,o.defineComponent)({__name:'App',setup(e){const t=(0,o.ref)('综合讨论区'),n=(0,o.ref)({mode:'board'}),a=(0,o.ref)(l()),u=(0,o.ref)(!1),p=(0,o.ref)(''),N=(0,o.computed)(()=>c(a.value,t.value)),y=(0,o.computed)(()=>{if('thread'===n.value.mode)return a.value.boards[n.value.board].posts.find(e=>e.postNo===n.value.postNo)});function Pe(e){return`${e.board}:${e.postNo}`}let Se;function $e(){Se&&window.clearTimeout(Se),Se=window.setTimeout(()=>{!function(e){localStorage.setItem(r(),JSON.stringify(e))}(a.value)},200)}function Me(){const e=getCurrentMessageId(),t=getChatMessages(e)[0];if(!t)return;const o=f(t.message);if(0===o.length)return;const{createdPosts:s,appendedFloors:n}=m(a.value,o,'ai',e);(s>0||n>0)&&($e(),p.value=`synced +${s} threads, +${n} replies`)}function Ce(e){const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,'0')}-${String(t.getDate()).padStart(2,'0')} ${String(t.getHours()).padStart(2,'0')}:${String(t.getMinutes()).padStart(2,'0')}`}(0,o.watch)(a,$e,{deep:!0});const Be=(0,o.ref)(''),De=(0,o.ref)(''),Te=(0,o.ref)(null),xe=(0,o.ref)(null);const Fe=(0,o.ref)(''),Ie=(0,o.ref)('');async function je(){const e=t.value,o=function(e){const t=`${e.board}帖子${e.postNo}`,o=(e.userInstruction??'').trim();return[`{{user}}正在为匿名版「${e.board}」创建一个新帖子，帖子序号必须是 ${e.postNo}（不要改序号）。`,o?`用户补充要求：${o}`:'','必须严格只输出以下 HTML 标签并用<匿名版></匿名版>包裹结构：','- 不要输出任何额外文字','- 不要输出 Markdown 代码块/反引号','- 正文/楼层内容中避免出现 < 或 >（如必须使用请改用全角＜＞）','以下是格式示例：','<匿名版>',`<${t}>`,'<标题>（在这里写标题）</标题>','<正文>（在这里写正文）</正文>','<楼层1>（在这里写首楼内容）</楼层1>',`</${t}>`,'</匿名版>'].filter(Boolean).join('\n')}({board:e,postNo:i(a.value,e),userInstruction:'请在该板块生成一个新的真实匿名版帖子（口吻像 2ch/4chan），标题要像用户自拟的主题，正文与首楼要有具体内容。'});await g(o)}function Oe(){Fe.value='',Ie.value=''}const Re=(0,o.computed)(()=>JSON.stringify(a.value,null,2)),He=(0,o.ref)('');return(0,o.onMounted)(()=>{!function(){let e=0;for(const t of s){for(const o of E[t]){if(a.value.boards[t].posts.some(e=>e.postNo===o.postNo))continue;const s=Date.now();a.value.boards[t].posts.push({board:t,postNo:o.postNo,title:o.title,body:o.body,createdAtMs:s,updatedAtMs:s,floors:(o.floors??[]).map((e,t)=>({floorNo:t+1,content:e,createdAtMs:s,source:'local'}))}),e+=1}a.value.boards[t].posts.sort((e,t)=>e.postNo-t.postNo)}e>0&&$e()}(),Me();const e=getCurrentMessageId();eventOn(tavern_events.MESSAGE_UPDATED,t=>{Number(t)===e&&Me()}),eventOn(tavern_events.MESSAGE_SWIPED,t=>{Number(t)===e&&Me()}),eventOn(tavern_events.GENERATION_ENDED,e=>{!function(e){const t=getChatMessages(e)[0];if(!t||'assistant'!==t.role)return;const o=f(t.message);if(0===o.length)return;const{createdPosts:s,appendedFloors:n}=m(a.value,o,'ai',e);(s>0||n>0)&&($e(),p.value=`synced +${s} threads, +${n} replies`)}(Number(e))}),eventOn(tavern_events.CHAT_CHANGED,()=>{window.location.reload()})}),(e,r)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',V,[(0,o.createElementVNode)('header',k,[r[17]||(r[17]=(0,o.createElementVNode)('div',{class:'bbs__brand'},[(0,o.createElementVNode)('span',{class:'bbs__logo'},'MChan'),(0,o.createElementVNode)('span',{class:'bbs__sep'},'/'),(0,o.createElementVNode)('span',{class:'bbs__tagline'},'anonymous board')],-1)),(0,o.unref)(p)?((0,o.openBlock)(),(0,o.createElementBlock)('div',h,(0,o.toDisplayString)((0,o.unref)(p)),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',A,[(0,o.createElementVNode)('button',{class:'bbs__link',type:'button',onClick:r[0]||(r[0]=e=>{u.value=!u.value})},(0,o.toDisplayString)((0,o.unref)(u)?'关闭工具':'工具'),1)])]),(0,o.createElementVNode)('nav',w,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(s),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:e,type:'button',class:(0,o.normalizeClass)(['bbs__navItem',{'bbs__navItem--active':(0,o.unref)(t)===e}]),onClick:o=>function(e){t.value=e,n.value={mode:'board'}}(e)},[(0,o.createElementVNode)('span',S,(0,o.toDisplayString)(e),1),(0,o.createElementVNode)('span',M,'('+(0,o.toDisplayString)((0,o.unref)(a).boards[e].posts.length)+')',1)],10,P))),128))]),(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('section',C,[(0,o.createElementVNode)('details',null,[r[20]||(r[20]=(0,o.createElementVNode)('summary',null,'导入/导出（localStorage）',-1)),(0,o.createElementVNode)('div',B,[(0,o.createElementVNode)('div',D,[r[18]||(r[18]=(0,o.createElementVNode)('div',{class:'bbs__label'},'导出',-1)),(0,o.createElementVNode)('textarea',{class:'bbs__textarea',rows:'6',readonly:'',value:(0,o.unref)(Re)},null,8,T)]),(0,o.createElementVNode)('div',x,[r[19]||(r[19]=(0,o.createElementVNode)('div',{class:'bbs__label'},'导入（会覆盖当前数据）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':r[1]||(r[1]=e=>(0,o.isRef)(He)?He.value=e:null),class:'bbs__textarea',rows:'5'},null,512),[[o.vModelText,(0,o.unref)(He)]]),(0,o.createElementVNode)('div',F,[(0,o.createElementVNode)('button',{class:'bbs__btn bbs__btn--danger',type:'button',onClick:r[2]||(r[2]=e=>function(){if(window.confirm('确定导入并覆盖当前匿名版数据？'))try{const e=JSON.parse(He.value);if(!e||'object'!=typeof e||1!==e.version)return void toastr.error('导入失败：JSON格式不正确或版本不匹配');a.value=e,$e(),toastr.success('导入成功')}catch{toastr.error('导入失败：无法解析JSON')}}())},'导入并覆盖'),(0,o.createElementVNode)('button',{class:'bbs__btn',type:'button',onClick:r[3]||(r[3]=e=>He.value='')},'清空')])])])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('main',I,['board'===(0,o.unref)(n).mode?((0,o.openBlock)(),(0,o.createElementBlock)('section',j,[(0,o.createElementVNode)('div',O,[(0,o.createElementVNode)('div',R,(0,o.toDisplayString)((0,o.unref)(t)),1),(0,o.createElementVNode)('button',{class:'bbs__btn bbs__btn--primary',type:'button',onClick:r[4]||(r[4]=e=>je())},'刷新'),(0,o.createElementVNode)('button',{class:'bbs__btn',type:'button',onClick:r[5]||(r[5]=e=>n.value={mode:'newThread'})},'发新串')]),r[21]||(r[21]=(0,o.createStaticVNode)('<div class="bbs__listHead" data-v-0c826d5f><span class="bbs__colNo" data-v-0c826d5f>No</span><span class="bbs__colSubj" data-v-0c826d5f>Subject</span><span class="bbs__colR" data-v-0c826d5f>R</span><span class="bbs__colUpd" data-v-0c826d5f>Updated</span></div>',1)),0===(0,o.unref)(N).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',H,'暂无帖子（预制帖子会在代码层面提供；此板块当前为空）。')):(0,o.createCommentVNode)('v-if',!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(N),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:Pe(e),type:'button',class:'bbs__rowItem',onClick:t=>{return o=e.board,s=e.postNo,void(n.value={mode:'thread',board:o,postNo:s});var o,s}},[(0,o.createElementVNode)('span',G,'#'+(0,o.toDisplayString)(e.postNo),1),(0,o.createElementVNode)('span',J,[(0,o.createElementVNode)('span',K,(0,o.toDisplayString)(e.title),1),e.body?((0,o.openBlock)(),(0,o.createElementBlock)('span',L,(0,o.toDisplayString)(e.body),1)):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createElementVNode)('span',W,(0,o.toDisplayString)(e.floors.length),1),(0,o.createElementVNode)('span',X,(0,o.toDisplayString)(Ce(e.updatedAtMs)),1)],8,U))),128))])):'thread'===(0,o.unref)(n).mode?((0,o.openBlock)(),(0,o.createElementBlock)('section',Y,[(0,o.createElementVNode)('div',q,[(0,o.createElementVNode)('button',{class:'bbs__link',type:'button',onClick:r[6]||(r[6]=e=>n.value={mode:'board'})},'← 返回'),(0,o.createElementVNode)('div',Q,[(0,o.createElementVNode)('span',Z,(0,o.toDisplayString)((0,o.unref)(n).board),1),r[22]||(r[22]=(0,o.createElementVNode)('span',{class:'bbs__sep'},'/',-1)),(0,o.createElementVNode)('span',ee,(0,o.toDisplayString)((0,o.unref)(n).board)+'帖子'+(0,o.toDisplayString)((0,o.unref)(n).postNo),1)])]),(0,o.unref)(y)?((0,o.openBlock)(),(0,o.createElementBlock)('div',te,[(0,o.createElementVNode)('div',oe,[(0,o.createElementVNode)('span',se,(0,o.toDisplayString)((0,o.unref)(y).title),1),(0,o.createElementVNode)('span',ne,' No.'+(0,o.toDisplayString)((0,o.unref)(y).postNo)+' · '+(0,o.toDisplayString)(Ce((0,o.unref)(y).createdAtMs))+' · replies '+(0,o.toDisplayString)((0,o.unref)(y).floors.length),1)]),(0,o.unref)(y).body?((0,o.openBlock)(),(0,o.createElementBlock)('div',re,(0,o.toDisplayString)((0,o.unref)(y).body),1)):(0,o.createCommentVNode)('v-if',!0)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(y)?((0,o.openBlock)(),(0,o.createElementBlock)('div',ae,[0===(0,o.unref)(y).floors.length?((0,o.openBlock)(),(0,o.createElementBlock)('div',le,'暂无回复')):(0,o.createCommentVNode)('v-if',!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(y).floors,e=>((0,o.openBlock)(),(0,o.createElementBlock)('article',{key:e.floorNo,class:'bbs__reply'},[(0,o.createElementVNode)('header',ce,[(0,o.createElementVNode)('span',ie,'No.'+(0,o.toDisplayString)(e.floorNo),1),(0,o.createElementVNode)('span',de,(0,o.toDisplayString)(Ce(e.createdAtMs)),1),(0,o.createElementVNode)('button',{class:'bbs__replyBtn',type:'button',onClick:t=>function(e){Te.value=e;const t=`>>No.${e}\n`;Be.value.startsWith(t)||(Be.value=t+Be.value),(0,o.nextTick)(()=>{xe.value?.focus()})}(e.floorNo)},'回复',8,be)]),(0,o.createElementVNode)('div',ue,(0,o.toDisplayString)(e.content),1)]))),128))])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(y)?((0,o.openBlock)(),(0,o.createElementBlock)('div',pe,[r[26]||(r[26]=(0,o.createElementVNode)('div',{class:'bbs__composerTitle'},'Reply',-1)),null!==(0,o.unref)(Te)?((0,o.openBlock)(),(0,o.createElementBlock)('div',fe,[r[23]||(r[23]=(0,o.createTextVNode)(' replying to ',-1)),(0,o.createElementVNode)('span',me,'No.'+(0,o.toDisplayString)((0,o.unref)(Te)),1),(0,o.createElementVNode)('button',{class:'bbs__link',type:'button',onClick:r[7]||(r[7]=e=>{Te.value=null})},'取消引用')])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',Ne,[r[24]||(r[24]=(0,o.createElementVNode)('div',{class:'bbs__label'},'你的回帖内容（将作为新楼层直接发布）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{ref_key:'replyTextareaEl',ref:xe,'onUpdate:modelValue':r[8]||(r[8]=e=>(0,o.isRef)(Be)?Be.value=e:null),class:'bbs__textarea',rows:'4'},null,512),[[o.vModelText,(0,o.unref)(Be)]])]),(0,o.createElementVNode)('div',_e,[r[25]||(r[25]=(0,o.createElementVNode)('div',{class:'bbs__label'},'跟帖要求（可留空）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':r[9]||(r[9]=e=>(0,o.isRef)(De)?De.value=e:null),class:'bbs__textarea',rows:'3'},null,512),[[o.vModelText,(0,o.unref)(De)]])]),(0,o.createElementVNode)('div',ve,[(0,o.createElementVNode)('button',{class:'bbs__btn bbs__btn--primary',type:'button',onClick:r[10]||(r[10]=e=>async function(e){let t=Be.value.trim();if(!t)return void toastr.warning('请先输入你的回帖内容');null===Te.value||t.includes(`>>No.${Te.value}`)||(t=`>>No.${Te.value}\n${t}`),b(e,{content:t,createdAtMs:Date.now(),source:'user',originKey:`user:${Date.now()}`}),$e();const o=d(e)-1,s=v({post:{board:e.board,postNo:e.postNo,title:e.title,body:e.body,floors:e.floors.map(e=>({floorNo:e.floorNo,content:e.content}))},lastFloorNo:o,aiFloorsToGenerate:1,aiStyleHint:De.value});await g(s),Be.value='',Te.value=null}((0,o.unref)(y)))},' 回帖 '),(0,o.createElementVNode)('button',{class:'bbs__btn',type:'button',onClick:r[11]||(r[11]=e=>Be.value='')},'清空')])])):(0,o.createCommentVNode)('v-if',!0)])):'newThread'===(0,o.unref)(n).mode?((0,o.openBlock)(),(0,o.createElementBlock)('section',ye,[(0,o.createElementVNode)('div',ge,[(0,o.createElementVNode)('button',{class:'bbs__link',type:'button',onClick:r[12]||(r[12]=e=>n.value={mode:'board'})},'← 返回'),(0,o.createElementVNode)('div',Ee,[(0,o.createElementVNode)('span',Ve,(0,o.toDisplayString)((0,o.unref)(t)),1),r[27]||(r[27]=(0,o.createElementVNode)('span',{class:'bbs__sep'},'/',-1)),r[28]||(r[28]=(0,o.createElementVNode)('span',null,'发新串',-1))])]),(0,o.createElementVNode)('div',ke,[r[31]||(r[31]=(0,o.createElementVNode)('div',{class:'bbs__composerTitle'},'New Thread',-1)),(0,o.createElementVNode)('div',he,[r[29]||(r[29]=(0,o.createElementVNode)('div',{class:'bbs__label'},'标题（Subject）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':r[13]||(r[13]=e=>(0,o.isRef)(Fe)?Fe.value=e:null),class:'bbs__input',type:'text'},null,512),[[o.vModelText,(0,o.unref)(Fe)]])]),(0,o.createElementVNode)('div',Ae,[r[30]||(r[30]=(0,o.createElementVNode)('div',{class:'bbs__label'},'正文（OP）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':r[14]||(r[14]=e=>(0,o.isRef)(Ie)?Ie.value=e:null),class:'bbs__textarea',rows:'7'},null,512),[[o.vModelText,(0,o.unref)(Ie)]])]),(0,o.createElementVNode)('div',we,[(0,o.createElementVNode)('button',{class:'bbs__btn bbs__btn--primary',type:'button',onClick:r[15]||(r[15]=e=>async function(){const e=t.value,o=i(a.value,e),s=Fe.value.trim(),r=Ie.value.trim();if(!s)return void toastr.warning('请先输入标题');const l=Date.now(),c={board:e,postNo:o,title:s,body:r,createdAtMs:l,updatedAtMs:l,floors:[]};a.value.boards[e].posts.push(c),a.value.boards[e].posts.sort((e,t)=>e.postNo-t.postNo),$e(),n.value={mode:'thread',board:e,postNo:o};const d=v({post:{board:e,postNo:o,title:s,body:r,floors:[]},lastFloorNo:0,aiFloorsToGenerate:1,aiStyleHint:'请直接回应OP正文内容，不要生成新帖。'});await g(d),Oe()}())},'发布'),(0,o.createElementVNode)('button',{class:'bbs__btn',type:'button',onClick:r[16]||(r[16]=e=>Oe())},'清空')])])])):(0,o.createCommentVNode)('v-if',!0)]),r[32]||(r[32]=(0,o.createElementVNode)('footer',{class:'bbs__footer'},[(0,o.createElementVNode)('span',{class:'bbs__mono'},'storage: localStorage'),(0,o.createElementVNode)('span',{class:'bbs__sep'},'·'),(0,o.createElementVNode)('span',{class:'bbs__mono'},'scope: chat')],-1))]))}});var Se=function o(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,o),r.exports}(502);const $e=(0,Se.A)(Pe,[['__scopeId','data-v-0c826d5f']]);function Me(){(0,o.createApp)($e).mount('#app')}$(()=>{errorCatched(Me)()});
//# sourceMappingURL=index.js.map</script><style>.bbs[data-v-0c826d5f]{border:1px solid rgba(230,215,255,.12);border-radius:10px;background:rgba(18,6,31,.98);padding:10px}.bbs__header[data-v-0c826d5f]{display:flex;align-items:baseline;gap:10px;padding-bottom:8px;border-bottom:1px solid rgba(230,215,255,.1)}.bbs__brand[data-v-0c826d5f]{font-family:var(--mchan-font-mono);font-size:12px;color:rgba(244,238,255,.86)}.bbs__logo[data-v-0c826d5f]{font-weight:700;letter-spacing:.06em}.bbs__tagline[data-v-0c826d5f]{color:rgba(244,238,255,.6)}.bbs__sep[data-v-0c826d5f]{opacity:.7;padding:0 4px}.bbs__status[data-v-0c826d5f]{font-family:var(--mchan-font-mono);font-size:11px;color:rgba(182,108,255,.92);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bbs__actions[data-v-0c826d5f]{margin-left:auto}.bbs__link[data-v-0c826d5f]{border:0;padding:0;background:rgba(0,0,0,0);cursor:pointer;color:rgba(244,238,255,.7);font-family:var(--mchan-font-mono);font-size:12px;text-decoration:underline}.bbs__nav[data-v-0c826d5f]{display:flex;flex-wrap:wrap;gap:8px;padding:10px 0}.bbs__navItem[data-v-0c826d5f]{border:1px solid rgba(230,215,255,.1);background:rgba(0,0,0,.14);color:rgba(244,238,255,.75);font-family:var(--mchan-font-mono);font-size:12px;padding:6px 8px;border-radius:8px;cursor:pointer}.bbs__navItem--active[data-v-0c826d5f]{border-color:rgba(182,108,255,.45);color:rgba(244,238,255,.92)}.bbs__navCount[data-v-0c826d5f]{opacity:.75;margin-left:4px}.bbs__tools[data-v-0c826d5f]{border:1px solid rgba(230,215,255,.1);border-radius:8px;padding:8px;margin:2px 0 10px;background:rgba(0,0,0,.16);font-size:12px;color:rgba(244,238,255,.78)}.bbs__toolsBody[data-v-0c826d5f]{margin-top:8px}.bbs__main[data-v-0c826d5f]{font-size:13px}.bbs__boardTop[data-v-0c826d5f],.bbs__threadTop[data-v-0c826d5f]{display:flex;align-items:center;gap:10px;padding:6px 0 10px}.bbs__boardTitle[data-v-0c826d5f]{font-family:var(--mchan-font-display);font-size:16px}.bbs__crumb[data-v-0c826d5f]{color:rgba(244,238,255,.7);font-family:var(--mchan-font-mono);font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bbs__crumbBoard[data-v-0c826d5f]{color:rgba(244,238,255,.88)}.bbs__mono[data-v-0c826d5f]{font-family:var(--mchan-font-mono)}.bbs__listHead[data-v-0c826d5f]{display:grid;grid-template-columns:64px 1fr 48px 120px;gap:8px;padding:6px 8px;border-top:1px solid rgba(230,215,255,.1);border-bottom:1px solid rgba(230,215,255,.1);background:rgba(0,0,0,.16);font-family:var(--mchan-font-mono);font-size:12px;color:rgba(244,238,255,.7)}.bbs__rowItem[data-v-0c826d5f]{width:100%;text-align:left;border:0;background:rgba(0,0,0,0);color:inherit;cursor:pointer;display:grid;grid-template-columns:64px 1fr 48px 120px;gap:8px;padding:8px 8px;border-bottom:1px solid rgba(230,215,255,.08)}.bbs__rowItem[data-v-0c826d5f]:hover{background:rgba(182,108,255,.07)}.bbs__colNo[data-v-0c826d5f],.bbs__colR[data-v-0c826d5f],.bbs__colUpd[data-v-0c826d5f]{font-family:var(--mchan-font-mono);font-size:12px;color:rgba(244,238,255,.7)}.bbs__colSubj[data-v-0c826d5f]{min-width:0}.bbs__subject[data-v-0c826d5f]{display:block;color:rgba(244,238,255,.92);font-weight:650}.bbs__snippet[data-v-0c826d5f]{display:block;margin-top:4px;color:rgba(244,238,255,.62);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bbs__empty[data-v-0c826d5f]{padding:12px 8px;color:rgba(244,238,255,.6);border-bottom:1px solid rgba(230,215,255,.08)}.bbs__op[data-v-0c826d5f]{border:1px solid rgba(230,215,255,.1);border-radius:8px;background:rgba(0,0,0,.16);padding:10px}.bbs__opHead[data-v-0c826d5f]{display:flex;flex-direction:column;gap:6px}.bbs__meta[data-v-0c826d5f]{font-family:var(--mchan-font-mono);font-size:11px;color:rgba(244,238,255,.62)}.bbs__opBody[data-v-0c826d5f]{margin-top:10px;white-space:pre-wrap;line-height:1.55;color:rgba(244,238,255,.84);overflow-wrap:anywhere}.bbs__replies[data-v-0c826d5f]{margin-top:10px;display:flex;flex-direction:column;gap:8px}.bbs__reply[data-v-0c826d5f]{border:1px solid rgba(230,215,255,.08);border-radius:8px;background:rgba(0,0,0,.12);padding:10px}.bbs__replyHead[data-v-0c826d5f]{display:flex;justify-content:flex-start;gap:10px;font-family:var(--mchan-font-mono);font-size:11px;color:rgba(244,238,255,.62);align-items:baseline}.bbs__replyNo[data-v-0c826d5f]{color:rgba(182,108,255,.9)}.bbs__replyMeta[data-v-0c826d5f]{margin-left:auto}.bbs__replyBtn[data-v-0c826d5f]{border:1px solid rgba(230,215,255,.1);border-radius:6px;background:rgba(0,0,0,.16);color:rgba(244,238,255,.72);font-family:var(--mchan-font-mono);font-size:11px;padding:4px 8px;cursor:pointer}.bbs__replyBtn[data-v-0c826d5f]:hover{background:rgba(182,108,255,.08);border-color:rgba(182,108,255,.25)}.bbs__replyBody[data-v-0c826d5f]{margin-top:8px;white-space:pre-wrap;line-height:1.55;color:rgba(244,238,255,.86);overflow-wrap:anywhere}.bbs__composer[data-v-0c826d5f]{margin-top:12px;border:1px solid rgba(230,215,255,.1);border-radius:8px;background:rgba(0,0,0,.16);padding:10px}.bbs__composerTitle[data-v-0c826d5f]{font-family:var(--mchan-font-display);font-size:14px;margin-bottom:10px}.bbs__field[data-v-0c826d5f]{margin-bottom:10px}.bbs__label[data-v-0c826d5f]{font-family:var(--mchan-font-mono);font-size:11px;color:rgba(244,238,255,.65);margin-bottom:6px}.bbs__input[data-v-0c826d5f],.bbs__textarea[data-v-0c826d5f]{width:100%;border:1px solid rgba(230,215,255,.14);border-radius:8px;background:rgba(0,0,0,.16);color:rgba(244,238,255,.9);padding:8px;font-family:var(--mchan-font-ui);font-size:13px}.bbs__textarea[data-v-0c826d5f]{resize:vertical}.bbs__row[data-v-0c826d5f]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.bbs__btn[data-v-0c826d5f]{border:1px solid rgba(230,215,255,.12);border-radius:8px;background:rgba(0,0,0,.16);color:rgba(244,238,255,.85);font-family:var(--mchan-font-mono);font-size:12px;padding:8px 10px;cursor:pointer}.bbs__btn--primary[data-v-0c826d5f]{border-color:rgba(182,108,255,.45);background:rgba(182,108,255,.1)}.bbs__btn--danger[data-v-0c826d5f]{border-color:rgba(255,91,200,.4);background:rgba(255,91,200,.08)}.bbs__hint[data-v-0c826d5f]{margin-top:8px;font-size:12px;color:rgba(244,238,255,.6)}.bbs__footer[data-v-0c826d5f]{margin-top:10px;padding-top:8px;border-top:1px solid rgba(230,215,255,.1);font-size:11px;color:rgba(244,238,255,.55)}@media (max-width:520px){.bbs__listHead[data-v-0c826d5f],.bbs__rowItem[data-v-0c826d5f]{grid-template-columns:56px 1fr 40px 0px}.bbs__colUpd[data-v-0c826d5f]{display:none}}
:root{--mchan-bg0:#12061f;--mchan-bg1:#1a0a2c;--mchan-surface0:rgba(36,14,54,0.78);--mchan-surface1:rgba(58,22,86,0.62);--mchan-border:rgba(230,215,255,0.1);--mchan-border2:rgba(230,215,255,0.16);--mchan-text:rgba(244,238,255,0.92);--mchan-text-dim:rgba(244,238,255,0.72);--mchan-text-faint:rgba(244,238,255,0.55);--mchan-accent:#b66cff;--mchan-accent2:#ff5bc8;--mchan-font-ui:ui-sans-serif,system-ui,'Segoe UI',sans-serif;--mchan-font-display:ui-serif,Georgia,'Times New Roman',serif;--mchan-font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono',monospace}html,body{margin:0;padding:0}body{font-family:var(--mchan-font-ui);color:var(--mchan-text)}#app{max-width:980px;margin:14px auto;padding:0 10px}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>